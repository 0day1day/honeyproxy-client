<script id="maintpl" type="text/template">
  <div>
    <form class="analyze pull-right" data-attach="analyzeForm">
      <div class="input-append">
        <input name="url" value="<%- options.url %>" type="text" class="input-xlarge" placeholder="http://example.com/evil" data-attach="analyzeUrl">
        <button type="submit" class="btn btn-primary" tabindex=0 ><i class="icon-screenshot" data-attach="analyzeButtonIcon"></i> Search & Analyze</button>
      </div>
    </form>
    <h4>Recent Analysis</h4>
    <table class="table table-striped table-condensed table-analysis" data-attach="analysisTable">
      <thead>
        <tr>
          <th style="width:50%">URL</th>
          <th style="width:25%">Results</th>
          <th style="width:25%">Time</th>
        </tr>
      </thead>
      <tbody>
        <% 
        if(options.rows.length > 0) 
          options.rows.forEach((function(data){ print(this.row(data)) }).bind(this)); 
        else
          print(this.noResults(this));
        %>
      </tbody>
    </table>
  </div>
</script>
<script id="maintpl-noresults" type="text/template">
  <tr>
    <td class="info" colspan="3">
      No results <% var url = (typeof $analyzeUrl !== "undefined") ? $analyzeUrl.val().trim() : ""; if(url != "") { %>for <i><%- $analyzeUrl.val() %></i> <% } %>so far.
    </td>
  </tr>
</script>
<script id="maintpl-row" type="text/template">
  <tr>
    <td title="<%-url %>"><%- url %></td>
    <td>
      <a href="/analysis/<%- id %>">
        <% 
          if(status === "ACTIVE") print('<i>running...</i>');
          if(status === "FINISHED") print("analysis complete"/*parseInt(request_count) + " requests"*/);
          if(status === "QUEUE") print('queued');
        %>
      </a>
    </td>
    <td><%- moment(submit_time).fromNow() %></td>
  </tr>
</script>